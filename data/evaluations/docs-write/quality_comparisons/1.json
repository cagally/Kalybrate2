{
  "prompt": "Create documentation for our REST API authentication methods. We support API keys, OAuth 2.0, and JWT tokens.",
  "baseline_response": "Here's a comprehensive API authentication documentation:\n\n# API Authentication Methods\n\n## Overview\n\nOur API supports multiple authentication methods to ensure secure access to resources:\n1. API Key Authentication\n2. OAuth 2.0 Authentication\n3. JWT (JSON Web Token) Authentication\n\n## 1. API Key Authentication\n\n### Method\nHTTP Header Authentication\n\n### Request Header\n```http\nAuthorization: ApiKey YOUR_API_KEY\n```\n\n### Example\n```bash\ncurl https://api.example.com/endpoint \\\n  -H \"Authorization: ApiKey abc123xyz456\"\n```\n\n### Key Features\n- Simple, stateless authentication\n- Best for server-to-server communication\n- Limited user context\n- Recommended for backend services\n\n### Key Management\n- Generated in developer portal\n- Can be rotated/revoked\n- Supports read/write permission scopes\n\n## 2. OAuth 2.0 Authentication\n\n### Supported Flows\n- Authorization Code Grant\n- Client Credentials Grant\n- Implicit Grant\n- Resource Owner Password Credentials\n\n### Authorization Code Example\n```http\nGET https://auth.example.com/oauth/authorize\n  ?response_type=code\n  &client_id=YOUR_CLIENT_ID\n  &redirect_uri=https://yourapp.com/callback\n  &scope=read:users\n```\n\n### Token Request\n```http\nPOST https://auth.example.com/oauth/token\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code\n&code=AUTH_CODE\n&client_id=YOUR_CLIENT_ID\n&client_secret=YOUR_CLIENT_SECRET\n```\n\n### Access Token Usage\n```http\nAuthorization: Bearer ACCESS_TOKEN\n```\n\n### Key Features\n- Delegated authorization\n- Fine-grained access control\n- Support for third-party application access\n- Refresh token support\n\n## 3. JWT (JSON Web Token) Authentication\n\n### Token Structure\n```json\n{\n  \"sub\": \"user123\",\n  \"name\": \"John Doe\",\n  \"iat\": 1516239022,\n  \"exp\": 1516242622,\n  \"roles\": [\"admin\"]\n}\n```\n\n### Request Header\n```http\nAuthorization: Bearer JWT_TOKEN\n```\n\n### Example Validation\n```bash\ncurl https://api.example.com/secure-endpoint \\\n  -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n```\n\n### Key Features\n- Stateless authentication\n- Self-contained token\n- Cryptographically signed\n- Claims-based authorization\n- Supports token expiration\n\n## Authentication Best Practices\n\n1. Always use HTTPS\n2. Store credentials securely\n3. Implement token refresh mechanisms\n4. Set appropriate token expiration\n5. Use strong, unique secrets\n6. Implement proper error handling\n\n## Error Responses\n\n### 401 Unauthorized\n```json\n{\n  \"error\": \"unauthorized\",\n  \"message\": \"Invalid or expired authentication credentials\"\n}\n```\n\n### 403 Forbidden\n```json\n{\n  \"error\": \"forbidden\",\n  \"message\": \"Insufficient permissions for requested resource\"\n}\n```\n\n## Rate Limiting\n\n- API Key: 1000 requests/hour\n- OAuth: Configurable per application\n- JWT: Controlled by token issuer\n\n## Choosing the Right Method\n\n- Simple Backend Service \u2192 API Key\n- User-Centric Web/Mobile App \u2192 OAuth 2.0\n- Microservices Communication \u2192 JWT\n- Third-Party Integration \u2192 OAuth 2.0\n\n## Support\n\nFor authentication issues:\n- Email: api-support@example.com\n- Documentation: https://docs.example.com/auth\n\n## Security Recommendations\n\n- Rotate credentials regularly\n- Use multi-factor authentication\n- Monitor and log authentication attempts\n- Implement IP whitelisting\n- Use strong, complex secrets\n\n---\n\nThis documentation provides a comprehensive overview of authentication methods, with clear examples, best practices, and guidance for developers.",
  "baseline_tokens": {
    "input": 31,
    "output": 928,
    "total": 959
  },
  "skill_response": "I'll draft documentation for Metabase's REST API authentication methods, following the documentation writing guidelines.\n\n# Metabase API Authentication\n\n## Overview\n\nMetabase provides multiple secure methods to authenticate and access our REST API. Choose the method that best fits your application's architecture and security requirements.\n\n## Authentication Methods\n\n### API Keys\n\nAPI keys are perfect for server-to-server communication and provide a straightforward way to authenticate your requests.\n\n#### Generating an API Key\n\n1. Navigate to **Settings** > **API Keys**\n2. Click **Create New API Key**\n3. Copy the generated key securely\n\n#### Using the API Key\n\nInclude the API key in your request header:\n\n```\nAuthorization: ApiKey your-api-key-here\n```\n\nExample request:\n```bash\ncurl https://your-metabase-instance.com/api/endpoint \\\n     -H \"Authorization: ApiKey abc123xyz789\"\n```\n\n**Best Practices:**\n- Rotate keys periodically\n- Limit key permissions to only required access\n- Never share keys publicly\n\n### OAuth 2.0\n\nOAuth 2.0 provides a robust, standardized authentication flow for applications that require delegated access.\n\n#### OAuth Flow\n\n1. **Register Your Application**\n   - Go to **Settings** > **OAuth Applications**\n   - Create a new OAuth client\n   - Receive **Client ID** and **Client Secret**\n\n2. **Authorization Request**\n   ```\n   GET https://your-metabase.com/auth/oauth/authorize\n   ?client_id=YOUR_CLIENT_ID\n   &redirect_uri=YOUR_CALLBACK_URL\n   &response_type=code\n   ```\n\n3. **Exchange Code for Token**\n   ```bash\n   POST https://your-metabase.com/auth/oauth/token\n   {\n     \"client_id\": \"YOUR_CLIENT_ID\",\n     \"client_secret\": \"YOUR_CLIENT_SECRET\",\n     \"code\": \"AUTHORIZATION_CODE\",\n     \"grant_type\": \"authorization_code\"\n   }\n   ```\n\n4. **Use Access Token**\n   ```\n   Authorization: Bearer YOUR_ACCESS_TOKEN\n   ```\n\n### JWT (JSON Web Tokens)\n\nJWT provides a compact, self-contained method for securely transmitting information between parties.\n\n#### Generating a JWT\n\n```python\nimport jwt\n\npayload = {\n    \"sub\": \"user@example.com\",  # Subject (user identifier)\n    \"exp\": datetime.utcnow() + timedelta(hours=1)  # Expiration\n}\n\ntoken = jwt.encode(\n    payload, \n    YOUR_SECRET_KEY, \n    algorithm=\"HS256\"\n)\n```\n\n#### Using the JWT\n\nInclude the token in the Authorization header:\n\n```\nAuthorization: Bearer YOUR_JWT_TOKEN\n```\n\n## Choosing the Right Method\n\n| Method      | Best For                           | Complexity | Security Level |\n|-------------|------------------------------------|-----------:|-------------:|\n| API Keys    | Server-to-server, simple integrations | Low       | Medium       |\n| OAuth 2.0   | Third-party apps, delegated access   | High      | High         |\n| JWT         | Microservices, stateless auth        | Medium    | High         |\n\n## Security Recommendations\n\n- Always use HTTPS\n- Implement token rotation\n- Restrict token permissions\n- Monitor and audit API access\n- Use the principle of least privilege\n\n## Troubleshooting\n\n**Common Authentication Errors:**\n- **401 Unauthorized**: Invalid or expired token\n- **403 Forbidden**: Insufficient permissions\n- **Rate Limit Exceeded**: Too many requests\n\nIf you encounter issues, verify:\n- Token is current\n- Correct authentication method\n- Proper header formatting\n\n## Need Help?\n\nCheck out our [API Reference Documentation](https://metabase.com/docs/api) for detailed information on endpoints and authentication.\n\n---\n\nThis documentation follows the guidelines by:\n- Being conversational and clear\n- Providing practical examples\n- Structuring information for easy scanning\n- Offering best practices and recommendations\n- Using consistent formatting\n- Focusing on the user's needs",
  "skill_tokens": {
    "input": 820,
    "output": 946,
    "total": 1766
  },
  "judge_verdict": "with_skill",
  "judge_reasoning": "Response A provides more complete and practical documentation with step-by-step instructions, best practices, and a clear structure. It includes specific implementation details like how to generate API keys and the complete OAuth flow. Response B covers more OAuth grant types but lacks the practical guidance and completeness that makes documentation truly useful for developers trying to implement authentication.",
  "judge_model": "claude-sonnet-4-20250514",
  "timestamp": "2026-01-01T18:40:38.820116"
}