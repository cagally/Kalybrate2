{
  "prompt": "Write a TypeScript function that calculates the average of an array of numbers with proper error handling for edge cases.",
  "baseline_response": "Here's a comprehensive TypeScript implementation of a function to calculate the average of an array of numbers with robust error handling:\n\n```typescript\n/**\n * Calculates the average of an array of numbers with comprehensive error handling.\n * \n * @param numbers - An array of numbers to calculate the average from\n * @returns The average of the numbers or throws an error for invalid inputs\n * @throws {Error} If the input is invalid or cannot calculate an average\n */\nfunction calculateAverage(numbers: number[]): number {\n    // Check if input is null or undefined\n    if (numbers == null) {\n        throw new Error('Input array cannot be null or undefined');\n    }\n\n    // Check if array is empty\n    if (numbers.length === 0) {\n        throw new Error('Cannot calculate average of an empty array');\n    }\n\n    // Validate that all elements are numbers\n    const invalidInput = numbers.some(num => {\n        return typeof num !== 'number' || isNaN(num) || !isFinite(num);\n    });\n\n    if (invalidInput) {\n        throw new Error('Array contains invalid numbers');\n    }\n\n    // Calculate sum using reduce\n    const sum = numbers.reduce((acc, current) => acc + current, 0);\n\n    // Calculate and return average\n    return sum / numbers.length;\n}\n\n// Example usage with error handling\nfunction demonstrateAverageCalculation() {\n    try {\n        // Successful cases\n        console.log('Average of [1, 2, 3, 4, 5]:', calculateAverage([1, 2, 3, 4, 5]));\n        console.log('Average of [0]:', calculateAverage([0]));\n        console.log('Average of [-1, 0, 1]:', calculateAverage([-1, 0, 1]));\n\n        // Error cases\n        console.log('Empty array:', calculateAverage([])); // Will throw an error\n    } catch (error) {\n        console.error('Error:', error instanceof Error ? error.message : 'An unknown error occurred');\n    }\n\n    // More error scenario demonstrations\n    try {\n        console.log('Null input:', calculateAverage(null as any)); // Will throw an error\n    } catch (error) {\n        console.error('Error:', error instanceof Error ? error.message : 'An unknown error occurred');\n    }\n\n    try {\n        console.log('Invalid numbers:', calculateAverage([1, 2, NaN, 4])); // Will throw an error\n    } catch (error) {\n        console.error('Error:', error instanceof Error ? error.message : 'An unknown error occurred');\n    }\n}\n\n// Alternative implementation with optional error handling and default return\n/**\n * Calculates the average with optional error handling and default return\n * \n * @param numbers - An array of numbers\n * @param options - Configuration options for average calculation\n * @returns The average or a default value\n */\nfunction calculateAverageWithOptions(\n    numbers: number[], \n    options: {\n        throwOnError?: boolean;\n        defaultValue?: number;\n    } = {}\n): number {\n    const { \n        throwOnError = true, \n        defaultValue = 0 \n    } = options;\n\n    try {\n        // Reuse the original validation logic\n        if (numbers == null || numbers.length === 0) {\n            throw new Error('Invalid input array');\n        }\n\n        const sum = numbers.reduce((acc, current) => {\n            if (typeof current !== 'number' || isNaN(current) || !isFinite(current)) {\n                throw new Error('Invalid number in array');\n            }\n            return acc + current;\n        }, 0);\n\n        return sum / numbers.length;\n    } catch (error) {\n        if (throwOnError) {\n            throw error;\n        }\n        return defaultValue;\n    }\n}\n\n// Utility function for type-safe average calculation\nfunction safeAverage(...numbers: number[]): number {\n    return calculateAverage(numbers);\n}\n\n// Run the demonstration\ndemonstrateAverageCalculation();\n\n// TypeScript type guards for additional type safety\nfunction isValidNumberArray(arr: any[]): arr is number[] {\n    return arr.every(item => typeof item === 'number' && !isNaN(item) && isFinite(item));\n}\n```\n\nThis implementation provides several key features:\n\n1. **Comprehensive Error Handling**:\n   - Checks for null/undefined input\n   - Handles empty arrays\n   - Validates that all elements are valid numbers\n   - Prevents division by zero\n\n2. **Flexible Implementation**:\n   - Basic `calculateAverage()` function with strict error throwing\n   - `calculateAverageWithOptions()` for more flexible error handling\n   - Optional default return value\n   - Type guard for additional type safety\n\n3. **TypeScript Features**:\n   - Strong typing\n   - Error type checking\n   - Optional parameters\n   - Generalized error handling\n\n4. **Performance Considerations**:\n   - Uses `reduce()` for efficient sum calculation\n   - Minimal iterations over the array\n\nExample Usage:\n```typescript\n// Basic usage\nconst avg1 = calculateAverage([1, 2, 3, 4, 5]); // Returns 3\nconst avg2 = calculateAverageWithOptions([1, 2, 3], { defaultValue: -1 }); // Returns 2\nconst avg3 = safeAverage(10, 20, 30); // Returns 20\n```\n\nError Scenarios Handled:\n- Null/undefined input\n- Empty array\n- Array with invalid numbers (NaN, Infinity)\n- Type mismatches\n\nThe implementation provides robust, type-safe average calculation with comprehensive error handling and flexibility for different use cases.\n\nAdditional improvements could include:\n- Adding more specific error types\n- Supporting custom error handling\n- Adding logging or monitoring capabilities",
  "baseline_tokens": {
    "input": 30,
    "output": 1404,
    "total": 1434
  },
  "skill_response": "I'll write a TypeScript function that calculates the average of an array of numbers with comprehensive error handling:\n\n```typescript\n/**\n * Calculates the average of an array of numbers\n * \n * @param numbers - An array of numbers to calculate the average\n * @returns The average of the numbers, or null if calculation is not possible\n * @throws {Error} If input is not an array or contains non-numeric values\n */\nfunction calculateAverage(numbers: number[]): number | null {\n  // Check if input is null or undefined\n  if (numbers == null) {\n    throw new Error('Input cannot be null or undefined');\n  }\n\n  // Check if input is an array\n  if (!Array.isArray(numbers)) {\n    throw new Error('Input must be an array of numbers');\n  }\n\n  // Check if array is empty\n  if (numbers.length === 0) {\n    return null;\n  }\n\n  // Validate that all elements are numbers\n  const invalidInput = numbers.some(num => typeof num !== 'number' || isNaN(num));\n  if (invalidInput) {\n    throw new Error('Array must contain only valid numbers');\n  }\n\n  // Calculate the sum of numbers\n  const sum = numbers.reduce((acc, curr) => acc + curr, 0);\n\n  // Calculate and return the average\n  return sum / numbers.length;\n}\n\n// Example usage and error handling demonstrations\nfunction demonstrateAverageCalculation() {\n  try {\n    // Valid cases\n    console.log(calculateAverage([1, 2, 3, 4, 5])); // Should return 3\n    console.log(calculateAverage([10, 20, 30])); // Should return 20\n    console.log(calculateAverage([])); // Should return null\n\n    // Error cases\n    console.log(calculateAverage(null)); // Throws error\n    console.log(calculateAverage([1, 2, 'three' as any])); // Throws error\n  } catch (error) {\n    console.error('Error calculating average:', error.message);\n  }\n}\n\n// Run the demonstration\ndemonstrateAverageCalculation();\n```\n\nThis implementation includes several key features:\n\n1. **Type Safety**: Uses TypeScript's type system to ensure type correctness\n2. **Comprehensive Error Handling**:\n   - Checks for null/undefined input\n   - Validates input is an array\n   - Handles empty arrays by returning null\n   - Checks for non-numeric values\n3. **Precise Calculation**: Uses `reduce()` to calculate sum efficiently\n4. **Flexible Return Type**: Returns `number | null` to handle edge cases\n5. **Documentation**: Includes JSDoc comments explaining function behavior\n\nError handling scenarios:\n- Passing `null` or `undefined`\n- Passing a non-array\n- Passing an array with non-numeric values\n- Handling empty arrays\n\nThe function will:\n- Return the average for valid number arrays\n- Return `null` for empty arrays\n- Throw specific errors for invalid inputs\n\nYou can further customize or extend this function based on specific requirements.",
  "skill_tokens": {
    "input": 133,
    "output": 732,
    "total": 865
  },
  "judge_verdict": "with_skill",
  "judge_reasoning": "Response A is more complete and thorough. It provides a more flexible design by returning null for empty arrays instead of throwing an error, which is often more practical. It includes comprehensive JSDoc documentation, demonstrates both valid and error cases in the example usage, and has a complete implementation. Response B appears to be cut off and incomplete, missing the full demonstration code. Response A also provides better error handling flexibility by distinguishing between different types of invalid inputs.",
  "judge_model": "claude-sonnet-4-20250514",
  "timestamp": "2026-01-01T17:13:28.386857"
}